<!DOCTYPE html>
<html>

<head>
    <script src="javaTeste.js"></script>
    <!--chama script de outro arquivo-->
    <title>Fockink | calculadora</title>
    <!--título e da pag -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="icon" type="imagem/png" href="img/icon.svg" />
    <!--Chama o bootstrap e coloca o ícone no titulo-->

    <link rel="stylesheet" href="./css/meuCss.css">
    <!--chama as conf. do css de outra pag-->

    <link rel="stylesheet" media="screen and (min-width: 900px)" href="./css/meuCss.css" />
    <!--Aqui vai ser puxado conf de responsividade -->
</head>

<body class="alinhamento">

    <header id="header" class="header" href="../img/LogoFockink.png">
        <!-- class="header" href="../img/LogoFockink.png" não estão fazendo nada -->
        <div class="container">
            <!--Faixa branca no meio do cabeçalho-->
            <nav class="navigation">
                <!--área de botões no menu-->
                <a href="https://www.fockink.ind.br" class="top"></a>
                <!--área de direcionamento para a pag principal some-->
                <a class="navigation__toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                    <!--Ainda não foi definido nada para os spans-->
                </a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="borda">

            <table class="table">
                <h1>Calculadora fotovoltaica</h1>
                <h3>Formulário de Inscrição:</h3>
                <div class="borda">
                    <h3>1. Local com rede elétrica?</h3>
                    <div class="table-responsive">
                        <select name="redeEletrica" id="redeEletrica">
                            <option value="sim" selected>Sim</option>
                            <option value="nao">Não</option>
                        </select>
                    </div>
                    <!--Aqui vai pedir se tem rede elétrica no local-->
                    <!-- A classe bordas está indormando que vai ter bordas nessa div-->
                </div>

                <div class="borda">
                    <h3>2.Qual tipo de local?</h3>
                    <div>
                        <select name="local" id="local" on-Change="combo(this, 'box)">

                            <option value="casa">casa</option>
                            <option value="empresa" selected>empresa</option>
                            <option value="outro">outro</option>
                        </select>
                    </div>
                    <!--Aqui no select está sendo nomeado o 
                        campo para depois fazer uma estimativa de onde vai ser instalado as placas, 
                        teto ou solo, e ver se o publico foco está sendo atingido -->
                </div>

                <div class="borda">
                    <h3>3.Local da instalação</h3>
                    <h3>Coletando Dados de Cep de uma API</h3>
                    <label>CEP:</label><br>
                    <div class="form-group">
                        <div class="col-md-5">
                            <input class="form-control" type="text" id="cep" name="cep" oninput="fazerRequisicao();"
                                value="" placeholder="CEP do local" required=""> <br>
                            <label>Localidade:</label><br>
                            <div id="localidade"></div>
                        </div>
                    </div>
                </div>
                <!--com o cep é possóvel identificar a cidade, e também é possível ver em uma Database a irradiação solar-->

                <script>
                    function fazerRequisicao() {
                        var cep = document.getElementById("cep").value;
                        if (cep.length > 7) {
                            var urlApi = "https://viacep.com.br/ws/" + cep + "/json/";
                            var xhttp = new XMLHttpRequest();
                            xhttp.open("GET", urlApi, false);
                            xhttp.send(); //A execução do script para aqui até a requisição retornar do servidor
                            var retorno = JSON.parse(xhttp.responseText);
                            console.log("retorno da API: ", xhttp.responseText);
                            console.log("cep: ", retorno.cep);
                            console.log("localidade: ", retorno.localidade);
                            console.log("uf: ", retorno.uf);
                            document.getElementById("localidade").innerHTML = retorno.localidade + "/" + retorno.uf;
                        } else {
                            document.getElementById("localidade").innerHTML = "cep invalido";
                        }
                    }
                    console.log(cep)

                    function captApresenta(cep, localidade, redeEletrica, local, contaMes, kwpConsumo, nomeCompleto, telefoneContato, email) {
                        var cep = document.getElementById("cep").value;
                        var localidade = document.getElementById("localidade").value;
                        var redeEletrica = document.getElementById("redeEletrica").value; // como saber se é sim ou n o selecionado
                        var local = document.getElementById("local").value;
                        var contaMes = document.getElementById("contaMes").value;
                        var tarifa = document.getElementById("tarifa").value;
                        var kwpConsumo = document.getElementById("kwpConsumo").value;
                        // var nomeCompleto = document.getElementById("nomeCompleto").value;
                        // var telefoneContato = document.getElementById("telefoneContato").value;
                        //var email = document.getElementById("email").value;

                        if (cep.length > 7) {
                            console.log("o cep é " + cep)
                        }

                        //  if(localidade === retorno.localidade){
                        //      console.log("A localidade é "+ retorno.localidade)
                        // }


                        if (redeEletrica === "sim") {

                            console.log("tem rede elétrica")
                        } else {
                            console.log("Não possui rede elétrica")
                        }

                        if (local === "empresa") {
                            console.log("Rede empresarial.")
                        } else {
                            console.log("É uma casa")
                        }

                        if (contaMes > 0) {
                            console.log("O valor da conta mensal é " + contaMes)
                        }

                        if (tarifa >= 0) {
                            console.log("O valor da tarifa é " + tarifa)
                        }

                        if (kwpConsumo > 0) {
                            console.log("A média de kwp consumida é " + kwpConsumo)
                        }

                        // if (nomeCompleto != undefined) {
                        //     console.log("Nome do possível contato " + nomeCompleto)
                        // }else{
                        //     alert.log("Não informou o nome")
                        // }

                        // if (telefoneContato <= 11) {
                        //     console.log("telefone do possível contato " + telefoneContato)
                        // }

                        // if (email > 0) {
                        //     console.log("email de contato " + kwpConsumo)
                        // }
                        exibe =

                            "<div class='grid-container borda2'>" +

                            "<div>" +
                            "<div>investimento</div> <!--1-->" +
                            "</div>" +

                            "<div>" +
                            "<div>Tamanho do sistema indicado</div> <!--2-->" +
                            "</div>" +

                            "<div>" +
                            "<div>Potencia instalada</div><!--3-->" +
                            "</div>" +

                            "<div>" +
                            "<div>economia mensal</div> <!--1-->" +
                            "</div>" +

                            "<div>" +
                            "<div>Quantidade de módulos</div><!--2-->" +
                            "</div>" +

                            "<div>" +
                            "<div>Média de produção mensal</div><!--3-->" +
                            "</div>" +

                            "<div>" +
                            "<div>valor aproximado do investimento</div> <!--1-->" +
                            "</div>" +

                            "<div>" +
                            "<div>Área estimada</div><!--2-->" +
                            "</div>"
                        "</div>";


                        document.getElementById("resultado").innerHTML = exibe;
                    }
                </script>

                <div class="borda">
                    <h3>4.Quanto gasta por mês?</h3>
                    <!-- <input type="text" id="gastoMensal" name="gastoMensal" style="width:300px;" value="">
                <button type="submit" id="enviaFormulario">Consultar</button> -->
                    <label>R$:</label><br>
                    <div class="form-group">
                        <div class="col-md-5">
                            <span class="input-euro left" type="text" id="gastoMensal" name="gastoMensal">
                                <input class="form-control " name="contaMes" id="contaMes" type="text"
                                    placeholder="2000" required="" />
                            </span>
                        </div>
                    </div>
                </div>

                <div class="borda">
                    <h3>5.Qual o valor da tarifa paga ?</h3>
                    <div class="form-group">
                        <div class="col-md-5">
                            <input class="form-control" name="tarifa" id="tarifa" type="text" placeholder="0,58"
                                required="" />
                        </div>
                    </div>
                </div>
                <div class="borda">
                    <h3>6.Quantos kWp/h são consumidos</h3>
                    <div class="form-group">
                        <div class="col-md-5">
                            <input class="form-control " name="kwpConsumo" id="kwpConsumo" type="text"
                                placeholder="3.389" required="" />
                        </div>
                    </div>
                </div>

                <div class="borda">
                    <div>
                        <h5>Antes de continuar</h5>
                        <form action="resultado.html" method="POST" name="formulario">

                            <div class="form-group">
                                <div class="   col-md-5">
                                    <label>Nome Completo</label>
                                    <input type="nomeCompleto" name="nomeCompleto" class="form-control "
                                        placeholder="Nome e Sobrenome" required="">
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-md-5">
                                    <label>Telefone de contato</label>
                                    <input type="telefoneContato" name="telefoneContato" class="form-control "
                                        placeholder="(55) 9 0000-0000" required="">
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="  col-md-5">
                                    <label>E-MAIL</label>
                                    <input type="email" name="email" class="form-control " placeholder="nome@email.com"
                                        required="">
                                </div>
                            </div>
                            <div>
                                <!-- <button class="btn btn-danger" onclick="captApresenta() ">teste de grid</button> -->
                                <!--O botão vai estar atribuido a 3 funções-->
                                <!--primeiro abrir um grid com os cálculos que foi apresentado com um orçamento para o cliente-->
                                <!--Armazenar todas as informações digitadas em variáveis-->
                                <!--Enviar por email as credenciais do cliente para um email que vai ser setado-->
                            </div>
                        </form>
                    </div>
                </div>
                <br>
                <div>
                    <button class="btn btn-danger" onclick="captApresenta() ">teste de grid</button>
                </div>
                <!-- O botão vai estar atribuido a 3 funções
                primeiro abrir um grid com os cálculos que foi apresentado com um orçamento para o cliente
                Armazenar todas as informações digitadas em variáveis
                Enviar por email as credenciais do cliente para um email que vai ser setado
                 -->
                <div class="borda2">
                    <div class='grid-container' id="resultado2" name="resultado2">
                    </div>
                </div>
            </table>
        </div>
    </div>
</body>

</html>